!function(a){var b,c=a.Chart,d=a.addEvent,e=a.removeEvent,f=HighchartsAdapter.fireEvent,g=a.createElement,h=a.discardElement,i=a.css,j=a.merge,k=a.each,l=a.extend,m=a.splat,n=Math,o=n.max,p=document,q=window,r=a.isTouchDevice,s="px",t=a.Renderer.prototype.symbols,u=a.getOptions();l(u.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),u.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:r?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},u.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},a.post=function(a,b,c){var d,e;e=g("form",j({method:"post",action:a,enctype:"multipart/form-data"},c),{display:"none"},p.body);for(d in b)g("input",{type:"hidden",name:d,value:b[d]},null,e);e.submit(),h(e)},l(c.prototype,{sanitizeSVG:function(a){return a.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(a){return a.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(b){var c,d,e,f,i,n,o,q,r,t=this,u=j(t.options,b),v=u.exporting.allowHTML;return p.createElementNS||(p.createElementNS=function(a,b){return p.createElement(b)}),d=g("div",null,{position:"absolute",top:"-9999em",width:t.chartWidth+s,height:t.chartHeight+s},p.body),o=t.renderTo.style.width,q=t.renderTo.style.height,i=u.exporting.sourceWidth||u.chart.width||/px$/.test(o)&&parseInt(o,10)||600,n=u.exporting.sourceHeight||u.chart.height||/px$/.test(q)&&parseInt(q,10)||400,l(u.chart,{animation:!1,renderTo:d,forExport:!0,renderer:"SVGRenderer",width:i,height:n}),u.exporting.enabled=!1,delete u.data,u.series=[],k(t.series,function(a){f=j(a.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:a.visible}),f.isInternal||u.series.push(f)}),b&&k(["xAxis","yAxis"],function(a){k(m(b[a]),function(b,c){u[a][c]=j(u[a][c],b)})}),c=new a.Chart(u,t.callback),k(["xAxis","yAxis"],function(a){k(t[a],function(b,d){var e=c[a][d],f=b.getExtremes(),g=f.userMin,h=f.userMax;!e||void 0===g&&void 0===h||e.setExtremes(g,h,!0,!1)})}),e=c.getChartHTML(),u=null,c.destroy(),h(d),v&&(r=e.match(/<\/svg>(.*?$)/))&&(r='<foreignObject x="0" y="0" width="200" height="200"><body xmlns="http://www.w3.org/1999/xhtml">'+r[1]+"</body></foreignObject>",e=e.replace("</svg>",r+"</svg>")),e=this.sanitizeSVG(e),e=e.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(a,b){var c=this.options.exporting;return this.getSVG(j({chart:{borderRadius:0}},c.chartOptions,b,{exporting:{sourceWidth:a&&a.sourceWidth||c.sourceWidth,sourceHeight:a&&a.sourceHeight||c.sourceHeight}}))},exportChart:function(b,c){var d=this.getSVGForExport(b,c);b=j(this.options.exporting,b),a.post(b.url,{filename:b.filename||"chart",type:b.type,width:b.width||0,scale:b.scale||2,svg:d},b.formAttributes)},print:function(){var a=this,b=a.container,c=[],d=b.parentNode,e=p.body,g=e.childNodes;a.isPrinting||(a.isPrinting=!0,f(a,"beforePrint"),k(g,function(a,b){1===a.nodeType&&(c[b]=a.style.display,a.style.display="none")}),e.appendChild(b),q.focus(),q.print(),setTimeout(function(){d.appendChild(b),k(g,function(a,b){1===a.nodeType&&(a.style.display=c[b])}),a.isPrinting=!1,f(a,"afterPrint")},1e3))},contextMenu:function(a,b,c,f,h,j,m){var n,p,q,r,t=this,u=t.options.navigation,v=u.menuItemStyle,w=t.chartWidth,x=t.chartHeight,y="cache-"+a,z=t[y],A=o(h,j),B=function(b){t.pointer.inClass(b.target,a)||p()};z||(t[y]=z=g("div",{className:a},{position:"absolute",zIndex:1e3,padding:A+s},t.container),n=g("div",null,l({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},u.menuStyle),z),p=function(){i(z,{display:"none"}),m&&m.setState(0),t.openMenu=!1},d(z,"mouseleave",function(){q=setTimeout(p,500)}),d(z,"mouseenter",function(){clearTimeout(q)}),d(document,"mouseup",B),d(t,"destroy",function(){e(document,"mouseup",B)}),k(b,function(a){if(a){var b=a.separator?g("hr",null,null,n):g("div",{onmouseover:function(){i(this,u.menuItemHoverStyle)},onmouseout:function(){i(this,v)},onclick:function(b){b.stopPropagation(),p(),a.onclick&&a.onclick.apply(t,arguments)},innerHTML:a.text||t.options.lang[a.textKey]},l({cursor:"pointer"},v),n);t.exportDivElements.push(b)}}),t.exportDivElements.push(n,z),t.exportMenuWidth=z.offsetWidth,t.exportMenuHeight=z.offsetHeight),r={display:"block"},c+t.exportMenuWidth>w?r.right=w-c-h-A+s:r.left=c-A+s,f+j+t.exportMenuHeight>x&&"top"!==m.alignOptions.verticalAlign?r.bottom=x-f-A+s:r.top=f+j-A+s,i(z,r),t.openMenu=!0},addButton:function(c){var d,e,f=this,g=f.renderer,h=j(f.options.navigation.buttonOptions,c),i=h.onclick,k=h.menuItems,m={stroke:h.symbolStroke,fill:h.symbolFill},n=h.symbolSize||12;if(f.btnCount||(f.btnCount=0),f.exportDivElements||(f.exportDivElements=[],f.exportSVGElements=[]),!1!==h.enabled){var o,p=h.theme,q=p.states,r=q&&q.hover,s=q&&q.select;delete p.states,i?o=function(a){a.stopPropagation(),i.call(f,a)}:k&&(o=function(){f.contextMenu(e.menuClassName,k,e.translateX,e.translateY,e.width,e.height,e),e.setState(2)}),h.text&&h.symbol?p.paddingLeft=a.pick(p.paddingLeft,25):h.text||l(p,{width:h.width,height:h.height,padding:0}),e=g.button(h.text,0,0,o,p,r,s).attr({title:f.options.lang[h._titleKey],"stroke-linecap":"round"}),e.menuClassName=c.menuClassName||"highcharts-menu-"+f.btnCount++,h.symbol&&(d=g.symbol(h.symbol,h.symbolX-n/2,h.symbolY-n/2,n,n).attr(l(m,{"stroke-width":h.symbolStrokeWidth||1,zIndex:1})).add(e)),e.add().align(l(h,{width:e.width,x:a.pick(h.x,b)}),!0,"spacingBox"),b+=(e.width+h.buttonSpacing)*("right"===h.align?-1:1),f.exportSVGElements.push(e,d)}},destroyExport:function(a){var b,c,d=a.target;for(b=0;b<d.exportSVGElements.length;b++)(c=d.exportSVGElements[b])&&(c.onclick=c.ontouchstart=null,d.exportSVGElements[b]=c.destroy());for(b=0;b<d.exportDivElements.length;b++)c=d.exportDivElements[b],e(c,"mouseleave"),d.exportDivElements[b]=c.onmouseout=c.onmouseover=c.ontouchstart=c.onclick=null,h(c)}}),t.menu=function(a,b,c,d){return["M",a,b+2.5,"L",a+c,b+2.5,"M",a,b+d/2+.5,"L",a+c,b+d/2+.5,"M",a,b+d-1.5,"L",a+c,b+d-1.5]},c.prototype.callbacks.push(function(a){var c,e=a.options.exporting,f=e.buttons;if(b=0,!1!==e.enabled){for(c in f)a.addButton(f[c]);d(a,"destroy",a.destroyExport)}})}(Highcharts);