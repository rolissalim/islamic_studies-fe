!function(a){var b=a.getOptions(),c=b.plotOptions,d=a.seriesTypes,e=a.merge,f=function(){},g=a.each,h=a.pick;c.funnel=e(c.pie,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),d.funnel=a.extendClass(d.pie,{type:"funnel",animate:f,translate:function(){var a,b,c,d,e,h,i,j,k,l,m,n=function(a,b){return/%$/.test(a)?b*parseInt(a,10)/100:parseInt(a,10)},o=0,p=this.chart,q=this.options,r=q.reversed,s=q.ignoreHiddenPoint,t=p.plotWidth,u=p.plotHeight,v=0,p=q.center,w=n(p[0],t),x=n(p[1],u),y=n(q.width,t),z=n(q.height,u),A=n(q.neckWidth,t),B=n(q.neckHeight,u),C=z-B,n=this.data,D="left"===q.dataLabels.position?1:0;this.getWidthAt=b=function(a){return a>z-B||z===B?A:A+(z-B-a)/(z-B)*(y-A)},this.getX=function(a,c){return w+(c?-1:1)*(b(r?u-a:a)/2+q.dataLabels.distance)},this.center=[w,x,z],this.centerX=w,g(n,function(a){s&&!1===a.visible||(o+=a.y)}),g(n,function(g){m=null,d=o?g.y/o:0,h=x-z/2+v*z,k=h+d*z,a=b(h),e=w-a/2,i=e+a,a=b(k),j=w-a/2,l=j+a,h>C?(e=j=w-A/2,i=l=w+A/2):k>C&&(m=k,a=b(C),j=w-a/2,l=j+a,k=C),r&&(h=z-h,k=z-k,m=m?z-m:null),c=["M",e,h,"L",i,h,l,k],m&&c.push(l,m,j,m),c.push(j,k,"Z"),g.shapeType="path",g.shapeArgs={d:c},g.percentage=100*d,g.plotX=w,g.plotY=(h+(m||k))/2,g.tooltipPos=[w,g.plotY],g.slice=f,g.half=D,s&&!1===g.visible||(v+=d)})},drawPoints:function(){var a=this,b=a.options,c=a.chart.renderer;g(a.data,function(d){var e=d.options,f=d.graphic,g=d.shapeArgs;f?f.animate(g):d.graphic=c.path(g).attr({fill:d.color,stroke:h(e.borderColor,b.borderColor),"stroke-width":h(e.borderWidth,b.borderWidth)}).add(a.group)})},sortByAngle:function(a){a.sort(function(a,b){return a.plotY-b.plotY})},drawDataLabels:function(){var a,b,c,e,f,g=this.data,h=this.options.dataLabels.distance,i=g.length;for(this.center[2]-=2*h;i--;)c=g[i],b=(a=c.half)?1:-1,f=c.plotY,e=this.getX(f,a),c.labelPos=[0,f,e+(h-5)*b,f,e+h*b,f,a?"right":"left",0];d.pie.prototype.drawDataLabels.call(this)}}),b.plotOptions.pyramid=a.merge(b.plotOptions.funnel,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),a.seriesTypes.pyramid=a.extendClass(a.seriesTypes.funnel,{type:"pyramid"})}(Highcharts);