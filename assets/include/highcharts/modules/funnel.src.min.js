!function(a){"use strict";var b=a.getOptions(),c=b.plotOptions,d=a.seriesTypes,e=a.merge,f=function(){},g=a.each,h=a.pick;c.funnel=e(c.pie,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),d.funnel=a.extendClass(d.pie,{type:"funnel",animate:f,translate:function(){var a,b,c,d,e,h,i,j,k,l,m,n=function(a,b){return/%$/.test(a)?b*parseInt(a,10)/100:parseInt(a,10)},o=0,p=this,q=p.chart,r=p.options,s=r.reversed,t=r.ignoreHiddenPoint,u=q.plotWidth,v=q.plotHeight,w=0,x=r.center,y=n(x[0],u),z=n(x[1],v),A=n(r.width,u),B=n(r.height,v),C=n(r.neckWidth,u),D=n(r.neckHeight,v),E=B-D,F=p.data,G="left"===r.dataLabels.position?1:0;p.getWidthAt=b=function(a){return a>B-D||B===D?C:C+(B-D-a)/(B-D)*(A-C)},p.getX=function(a,c){return y+(c?-1:1)*(b(s?v-a:a)/2+r.dataLabels.distance)},p.center=[y,z,B],p.centerX=y,g(F,function(a){t&&!1===a.visible||(o+=a.y)}),g(F,function(g){m=null,d=o?g.y/o:0,h=z-B/2+w*B,k=h+d*B,a=b(h),e=y-a/2,i=e+a,a=b(k),j=y-a/2,l=j+a,h>E?(e=j=y-C/2,i=l=y+C/2):k>E&&(m=k,a=b(E),j=y-a/2,l=j+a,k=E),s&&(h=B-h,k=B-k,m=m?B-m:null),c=["M",e,h,"L",i,h,l,k],m&&c.push(l,m,j,m),c.push(j,k,"Z"),g.shapeType="path",g.shapeArgs={d:c},g.percentage=100*d,g.plotX=y,g.plotY=(h+(m||k))/2,g.tooltipPos=[y,g.plotY],g.slice=f,g.half=G,t&&!1===g.visible||(w+=d)})},drawPoints:function(){var a=this,b=a.options,c=a.chart,d=c.renderer;g(a.data,function(c){var e=c.options,f=c.graphic,g=c.shapeArgs;f?f.animate(g):c.graphic=d.path(g).attr({fill:c.color,stroke:h(e.borderColor,b.borderColor),"stroke-width":h(e.borderWidth,b.borderWidth)}).add(a.group)})},sortByAngle:function(a){a.sort(function(a,b){return a.plotY-b.plotY})},drawDataLabels:function(){var a,b,c,e,f,g=this.data,h=this.options.dataLabels.distance,i=g.length;for(this.center[2]-=2*h;i--;)c=g[i],a=c.half,b=a?1:-1,f=c.plotY,e=this.getX(f,a),c.labelPos=[0,f,e+(h-5)*b,f,e+h*b,f,a?"right":"left",0];d.pie.prototype.drawDataLabels.call(this)}}),b.plotOptions.pyramid=a.merge(b.plotOptions.funnel,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),a.seriesTypes.pyramid=a.extendClass(a.seriesTypes.funnel,{type:"pyramid"})}(Highcharts);